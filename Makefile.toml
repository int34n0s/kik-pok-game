[config]
default_to_workspace = false
min_version = "0.36.0"

[env]
SPACETIME_CLIENT_DIR = "crates/rust/src/spacetimedb_client"

[tasks.update-sdk]
description = "Update SpacetimeDB client SDK by regenerating Rust bindings"
script = [
    "echo 'Updating SpacetimeDB client SDK...'",
    "spacetime generate -p crates/server -o ${SPACETIME_CLIENT_DIR} --lang rust",
    "echo 'SpacetimeDB client SDK updated successfully!'"
]

[tasks.lint]
description = "Lint the project"
script = [
    "cargo fmt --all --check",
    "cargo clippy --workspace --all-targets --all-features -- -D warnings",
    "cargo server-check"
]

[tasks.default]
description = "Show available tasks"
script = [
    "echo 'Available tasks:'",
    "echo '  update-sdk    - Update SpacetimeDB client SDK'",
    "echo ''",
    "echo 'Usage: cargo make <task-name>'"
] 